<html>
<head>
    <title> Generate Configuration File</title>
</head>
<body>
<form action="javascript:void(0);" onsubmit="download(htmlToXML(this));">
    <section>
        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="Configuration">
            <legend>Configuration</legend>
            <section><label data-xsd2html2xml-type="element" data-xsd2html2xml-name="pipeline.name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" data-xsd2html2xml-primitive="xs:string" value="pipeline1"><span>pipeline.name</span></label></section>
            <section><label data-xsd2html2xml-type="element" data-xsd2html2xml-name="start"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" data-xsd2html2xml-primitive="xs:string"><span>start (Please Enter in TZ format)
            </span></label>
            </section>
            <section><label data-xsd2html2xml-type="element" data-xsd2html2xml-name="end"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" data-xsd2html2xml-primitive="xs:string"><span>end (Please Enter in TZ format)
            </span></label>
            </section>
            <section><label data-xsd2html2xml-type="element" data-xsd2html2xml-name="queue"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" data-xsd2html2xml-primitive="xs:string" value="default"><span>queue</span></label></section>
            <section><label data-xsd2html2xml-type="element" data-xsd2html2xml-name="format"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" data-xsd2html2xml-primitive="xs:string" value="csv"><span>format</span></label></section>
            <section><label data-xsd2html2xml-type="element" data-xsd2html2xml-name="compressionCodec"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" data-xsd2html2xml-primitive="xs:string" value="none"><span>compressionCodec</span></label></section>
            <section><label data-xsd2html2xml-type="element" data-xsd2html2xml-name="falcon-cluster"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" data-xsd2html2xml-primitive="xs:string" value="merlin-ml-1"><span>falcon-cluster</span></label></section>
            <section>
                <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="source-datasets" style="display: none;">
                    <legend>source-datasets<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                    <section>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="source-dataset">
                            <legend>source-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="from"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(-1, 0)"><span>from</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="to"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(0, -1)"><span>to</span></label>
                        </fieldset>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="source-dataset" style="display: none;">
                            <legend>source-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="from"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(-1, 0)"><span>from</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="to"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(0, -1)"><span>to</span></label>
                        </fieldset>
                        <button type="button" class="add" data-xsd2html2xml-min="1" data-xsd2html2xml-max="unbounded" onclick="clickAddButton(this);">+ source-dataset</button>
                    </section>
                </fieldset>
                <button type="button" class="add" data-xsd2html2xml-min="0" data-xsd2html2xml-max="1" onclick="clickAddButton(this);">+ source-datasets</button>
            </section>
            <section>
                <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="source-training-datasets" style="display: none;">
                    <legend>source-training-datasets<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                    <section>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="source-training-dataset">
                            <legend>source-training-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="from"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(-1, 0)"><span>from</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="to"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(0, -1)"><span>to</span></label>
                        </fieldset>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="source-training-dataset" style="display: none;">
                            <legend>source-training-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="from"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(-1, 0)"><span>from</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="to"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="now(0, -1)"><span>to</span></label>
                        </fieldset>
                        <button type="button" class="add" data-xsd2html2xml-min="1" data-xsd2html2xml-max="unbounded" onclick="clickAddButton(this);">+ source-training-dataset</button>
                    </section>
                </fieldset>
                <button type="button" class="add" data-xsd2html2xml-min="0" data-xsd2html2xml-max="1" onclick="clickAddButton(this);">+ source-training-datasets</button>
            </section>
            <section>
                <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="target-datasets" style="display: none;">
                    <legend>target-datasets<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                    <section>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="target-dataset">
                            <legend>target-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="cluster"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>cluster</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="path.prefix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>path.prefix</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="dataset-name.suffix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="-1"><span>dataset-name.suffix</span></label>
                        </fieldset>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="target-dataset" style="display: none;">
                            <legend>target-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="cluster"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>cluster</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="path.prefix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>path.prefix</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="dataset-name.suffix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="-1"><span>dataset-name.suffix</span></label>
                        </fieldset>
                        <button type="button" class="add" data-xsd2html2xml-min="1" data-xsd2html2xml-max="unbounded" onclick="clickAddButton(this);">+ target-dataset</button>
                    </section>
                </fieldset>
                <button type="button" class="add" data-xsd2html2xml-min="0" data-xsd2html2xml-max="1" onclick="clickAddButton(this);">+ target-datasets</button>
            </section>
            <section>
                <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="target-training-datasets" style="display: none;">
                    <legend>target-training-datasets<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                    <section>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="target-training-dataset">
                            <legend>target-training-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="cluster"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>cluster</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="path.prefix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>path.prefix</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="dataset-name.suffix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="-1"><span>dataset-name.suffix</span></label>
                        </fieldset>
                        <fieldset data-xsd2html2xml-type="element" data-xsd2html2xml-name="target-training-dataset" style="display: none;">
                            <legend>target-training-dataset<button type="button" class="remove" onclick="clickRemoveButton(this);">-</button></legend>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="name"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>name</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="cluster"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>cluster</span></label>
                            <section>
                                <label data-xsd2html2xml-type="element" data-xsd2html2xml-name="frequency">
                                    <select onchange="this.childNodes.forEach(function(o) { o.removeAttribute(&quot;selected&quot;); }); this.children[this.selectedIndex].setAttribute(&quot;selected&quot;,&quot;selected&quot;);" required="required" disabled="">
                                        <option value="hourly">hourly</option>
                                        <option value="daily">daily</option>
                                        <option value="monthly">monthly</option>
                                        <option value="minutely">minutely</option>
                                    </select>
                                    <span>frequency</span>
                                </label>
                            </section>
                            <label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="path.prefix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string"><span>path.prefix</span></label><label data-xsd2html2xml-type="attribute" data-xsd2html2xml-name="dataset-name.suffix"><input type="text" onchange="if (this.value) { this.setAttribute(&quot;value&quot;, this.value); } else { this.removeAttribute(&quot;value&quot;); };" required="required" pattern=".{0,}" disabled="" data-xsd2html2xml-primitive="xs:string" value="-1"><span>dataset-name.suffix</span></label>
                        </fieldset>
                        <button type="button" class="add" data-xsd2html2xml-min="1" data-xsd2html2xml-max="unbounded" onclick="clickAddButton(this);">+ target-training-dataset</button>
                    </section>
                </fieldset>
                <button type="button" class="add" data-xsd2html2xml-min="0" data-xsd2html2xml-max="1" onclick="clickAddButton(this);">+ target-training-datasets</button>
            </section>
        </fieldset>
    </section>
    <input type="submit" value="Submit Job">
    <style type="text/css">
        body {
        font-family: Calibri, Arial, sans-serif;
        font-size: 11pt;
        margin: auto;
        padding-top: 25px;
        padding-bottom: 25px;
        width: 80%;
        min-width: 200px;
        }
        input[type='submit'] {
        margin-bottom: 20px;
        }
        button, input, select, textarea {
        box-sizing: border-box;
        font-family: Calibri, Arial, sans-serif;
        font-size: 10pt;
        }
        fieldset {
        margin-top: 20px;
        margin-bottom: 20px;
        border: 1px solid black;
        border-radius: 5px;
        }
        button.add {
        width: 50%;
        margin-bottom: 5px;
        margin-left: 50%;
        }
        button.remove {
        margin-left: 5px;
        }
        label {
        display: block;
        width: 100%;
        clear: both;
        }
        label > span {
        max-width: 50%;
        }
        select + span:after, textarea + span:after, input:not([type='checkbox']):not([type='radio']) + span:after {
        content: ':';
        }
        select + span:after, textarea[required] + span:after, input[required]:not([type='checkbox']):not([type='radio']) + span:after {
        content: '*:';
        }
        input[required][type='checkbox'] + span:after {
        content: '*';
        }
        input, select, textarea {
        float: right;
        width: 50%;
        margin-bottom: 3px;
        vertical-align: middle;
        }
        input:not([type='range']), textarea, select {
        padding: 3px;
        }
        input[type='checkbox'], input[type='radio'] {
        float: none;
        width: auto;
        margin-left: 50%;
        }
        input[type='range'] {
        width: 40%;
        }
        output::before {
        content: '(';
        }
        output {
        width: 10%;
        float: right;
        text-align: center;
        }
        output:empty::after {
        content: '...)';
        }
        output::after {
        content: ')';
        }
        textarea {
        resize: vertical;
        }
        input[type='text'],
        input[type='number'],
        input[type='date'],
        input[type='time'],
        input[type='datetime-local'],
        input[type='month'],
        input[type='url'],
        textarea,
        select {
        border: 1px solid black;
        border-radius: 5px;
        }
        input[type='text']:invalid,
        input[type='number']:invalid,
        input[type='date']:invalid,
        input[type='time']:invalid,
        input[type='datetime-local']:invalid,
        input[type='month']:invalid,
        input[type='url']:invalid,
        textarea:invalid {
        border: 1px solid #cc0000;
        }
        input[type='checkbox']:invalid + span {
        color: #cc0000;
        }
        input[type='file']:invalid {
        color: #cc0000;
        }
      </style>
    <script type="text/javascript">
        function download(text) {
            var schemaHTML=window.parent.document.getElementById("schemaIframe").contentWindow.document.getElementById('schemaForm')
            var metadataHTML=window.parent.document.getElementById("metadataIframe").contentWindow.document.getElementById('metadataForm')
            var trainingHTML=window.parent.document.getElementById("trainingIframe").contentWindow.document.getElementById('trainingForm')
            generateXML(htmlToXML(schemaHTML), "schema")
            generateXML(htmlToXML(metadataHTML), "metadata")
            generateXML(htmlToXML(trainingHTML), "training")
            generateConf(text)
        }

        function generateXML(text, fileName) {
            var formData = new FormData();
            formData.append("xml",text);
            formData.append("fileName", fileName)

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/generatexml");

           xhr.onload = function() {
                if(xhr.status == 200) {
                    document.open();
                    document.close();
                } else {
                    document.open();
                    document.write("Error occurred");
                    document.close();
                }
            }
             xhr.send(formData);
        }


        function generateConf(text) {
            var formData = new FormData();
            formData.append("xml",text);
            formData.append("fileName", "pipeline")

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/generateconf");

           xhr.onload = function() {
                if(xhr.status == 200) {
                    document.open();
                    document.write("Job Submitted");
                    document.close();

                } else {
                    document.open();
                    document.write("Error occurred");
                    document.close();
                }
            }
             xhr.send(formData);
        }

        /* POLYFILLS */

        /* add .matches if not natively supported */
        if (!Element.prototype.matches)
        	Element.prototype.matches = Element.prototype.msMatchesSelector ||
        								Element.prototype.webkitMatchesSelector;

        /* add .closest if not natively supported */
        if (!Element.prototype.closest)
        	Element.prototype.closest = function(s) {
        		var el = this;
        		do {
        			if (el.nodeType !== 1) return null;
        			if (el.matches(s)) return el;
        			el = el.parentElement || el.parentNode;
        		} while (el !== null);
        		return null;
        	};

        /* add .forEach if not natively supported */
        if (!NodeList.prototype.forEach) {
        	NodeList.prototype.forEach = function(callback){
        		var i = 0;
        		while (i != this.length) {
        			callback.apply(this, [this[i], i, this]);
        			i++;
        		}
        	};
        }

        /* VALUE SETTERS */

        /* specifically set values on ranges */
        document.querySelectorAll("[type='range']").forEach(function(o) {
        	if (o.getAttribute("value")) {
        		o.value = o.getAttribute("value").replace(/\D/g, "");
        	} else if (o.getAttribute("min")) {
        		o.value = o.getAttribute("min");
        	} else if (o.getAttribute("max")) {
        		o.value = o.getAttribute("max");
        	} else {
        		o.value = 0;
        		o.onchange();
        	}
        });

        /* specifically set values on datepickers */
        document.querySelectorAll("[data-xsd2html2xml-primitive='xs:gday']").forEach(function(o) {
        	if (o.getAttribute("value")) {
        		o.value = o.getAttribute("value").replace(/-+0?/g, "");
        	}
        });
        document.querySelectorAll("[data-xsd2html2xml-primitive='xs:gmonth']").forEach(function(o) {
        	if (o.getAttribute("value")) {
        		o.value = o.getAttribute("value").replace(/-+0?/g, "");
        	}
        });
        document.querySelectorAll("[data-xsd2html2xml-primitive='xs:gmonthday']").forEach(function(o) {
        	if (o.getAttribute("value")) {
        		o.value = new Date().getFullYear().toString().concat(o.getAttribute("value").substring(1));
        	}
        });

        /* EVENT HANDLERS */

        var clickAddButton = function(button) {
        	var newNode = button.previousElementSibling.cloneNode(true);

        	newNode.removeAttribute("style");

        	newNode.querySelectorAll("input, select, textarea").forEach(function(o) {
        		if (o.closest("[style]") == null)
        			o.removeAttribute("disabled");
        	});

        	button.parentNode.insertBefore(
        		newNode, button.previousElementSibling
        	);

        	if ((button.parentNode.children.length - 2) == button.getAttribute("data-xsd2html2xml-max"))
        		button.setAttribute("disabled", "disabled");
        }

        var clickRemoveButton = function(button) {
        	if ((button.closest("section").children.length - 2) == button.closest("section").lastElementChild.getAttribute("data-xsd2html2xml-min"))
        		button.closest("section").lastElementChild.click();

        	if ((button.closest("section").children.length - 2) == button.closest("section").lastElementChild.getAttribute("data-xsd2html2xml-max"))
        		button.closest("section").lastElementChild.removeAttribute("disabled");

        	button.closest("section").removeChild(
        		button.closest("fieldset, label")
        	);
        }

        var clickRadioInput = function(input, name) {
        	document.querySelectorAll("[name=".concat(name).concat("]")).forEach(function(o) {
        		o.removeAttribute("checked");
        		var section = o.parentElement.nextElementSibling;

        		section.querySelectorAll("input, select, textarea").forEach(function(p) {
        			if (input.parentElement.nextElementSibling.contains(p)) {
        				if (p.closest("[data-xsd2html2xml-choice]") === section) {
        					if (p.closest("*[style]") === null)
        						p.removeAttribute("disabled");
        					else
        						p.setAttribute("disabled", "disabled");
        				}
        			} else
        				p.setAttribute("disabled", "disabled");
        		});
        	});
        	input.setAttribute("checked","checked");
        }

        var pickFile = function(input, file, type) {
        	var resetFilePicker = function(input) {
        		input.removeAttribute("value");
        		input.removeAttribute("type");
        		input.setAttribute("type", "file");
        	}

        	var fileReader = new FileReader();

        	fileReader.onloadend = function() {
        		if (fileReader.error) {
        			alert(fileReader.error);
        			resetFilePicker(input);
        		} else {
        			input.setAttribute("value",
        				(type === "xs:base64binary")
        				? fileReader.result.substring(fileReader.result.indexOf(",") + 1)
        				//convert base64 to base16 (hexBinary)
        				: atob(fileReader.result.substring(fileReader.result.indexOf(",") + 1))
        			    	.split('')
        			    	.map(function (aChar) {
        			    		return ('0' + aChar.charCodeAt(0).toString(16)).slice(-2);
        			    	})
        					.join('')
        					.toUpperCase()
        			);
        		};
        	};

        	if(file) {
        		fileReader.readAsDataURL(file);
        	} else {
        		resetFilePicker(input);
        	}

        	if (input.getAttribute("data-xsd2html2xml-required")) input.setAttribute("required", "required");
        }

        /* XML GENERATORS */

        var htmlToXML = function(root) {
            var namespaces = [];
            var prefixes = [];

            document.querySelectorAll("[data-xsd2html2xml-namespace]:not([data-xsd2html2xml-namespace=''])").forEach(function(o) {
            	if (namespaces.indexOf(
            		o.getAttribute("data-xsd2html2xml-namespace")
            	) == -1) {
        	    	namespaces.push(
        	    		o.getAttribute("data-xsd2html2xml-namespace")
        	    	);

        	    	prefixes.push(
        	    		o.getAttribute("data-xsd2html2xml-name").substring(
            				0, o.getAttribute("data-xsd2html2xml-name").indexOf(":")
            			)
            		);
            	}
            });

            var namespaceString = "";

            namespaces.forEach(function(o,i) {
            	namespaceString = namespaceString.concat(
            		"xmlns".concat(
            			(prefixes[i] == "" ? "=" : ":".concat(prefixes[i].concat("=")))
            		).concat(
            			"\"".concat(namespaces[i]).concat("\" ")
            		)
            	)
            });

            return String.fromCharCode(60).concat("?xml version=\"1.0\"?").concat(String.fromCharCode(62)).concat(getXML(root, false, namespaceString.trim()));
        };

        var getXML = function(parent, attributesOnly, namespaceString) {
            var xml = "";
            var children = [].slice.call(parent.children);
            children.forEach(function(o) {
                if (!o.getAttribute("style")) {
                    switch (o.getAttribute("data-xsd2html2xml-type")) {
                        case "element":
                            if (!attributesOnly) xml = xml.concat(String.fromCharCode(60)).concat(o.getAttribute("data-xsd2html2xml-name")).concat(getXML(o, true)).concat(String.fromCharCode(62)).concat(function() {
                                if (o.nodeName.toLowerCase() === "label") {
                                    return getContent(o);
                                } else return getXML(o)
                            }()).concat(String.fromCharCode(60)).concat("/").concat(o.getAttribute("data-xsd2html2xml-name")).concat(String.fromCharCode(62));
                            break;
                        case "attribute":
                        	if (attributesOnly)
        						if (getContent(o)
        							|| (o.getElementsByTagName("input").length > 0
        								? o.getElementsByTagName("input")[0].getAttribute("data-xsd2html2xml-primitive").toLowerCase() === "xs:boolean"
        								: false
        							))
        							xml = xml.concat(" ").concat(o.getAttribute("data-xsd2html2xml-name")).concat("=\"").concat(getContent(o)).concat("\"");
                            break;
                        case "cdata":
                            if (!attributesOnly) xml = xml.concat(getContent(o));
                            break;
                        default:
                            if (!attributesOnly) {
                            	if (!o.getAttribute("data-xsd2html2xml-choice"))
                            		xml = xml.concat(getXML(o));

                            	if (o.getAttribute("data-xsd2html2xml-choice"))
                            		if (o.previousElementSibling.getElementsByTagName("input")[0].checked)
                            			xml = xml.concat(getXML(o));
                            }
                            break;
                    }
                }
            });

            if (namespaceString) {
            	xml = xml.substring(0, xml.indexOf(String.fromCharCode(62))).concat(" ").concat(namespaceString).concat(xml.substring(xml.indexOf(String.fromCharCode(62))));
            }

            return xml;
        };

        var getContent = function(node) {
            if (node.getElementsByTagName("input").length != 0) {
                switch (node.getElementsByTagName("input")[0].getAttribute("type").toLowerCase()) {
                    case "checkbox":
                        return node.getElementsByTagName("input")[0].checked;
                    case "file":
                    case "range":
                    case "date":
                    case "time":
                    case "datetime-local":
                    	return node.getElementsByTagName("input")[0].getAttribute("value");
                    default:
                    	switch (node.getElementsByTagName("input")[0].getAttribute("data-xsd2html2xml-primitive").toLowerCase()) {
        		            case "xs:gday":
        		            case "xs:gmonth":
        		            case "xs:gmonthday":
        		            case "xs:gyear":
        		            case "xs:gyearmonth":
        		            	return node.getElementsByTagName("input")[0].getAttribute("value");
        		            default:
        		            	return node.getElementsByTagName("input")[0].value;
                    	}
                }
            } else if (node.getElementsByTagName("select").length != 0) {
                return node.getElementsByTagName("select")[0].value;
            } else if (node.getElementsByTagName("textarea").length != 0) {
            	return node.getElementsByTagName("textarea")[0].value;
            }
        }

        /* INITIAL CALLS */

        document.querySelectorAll("[data-xsd2html2xml-filled='true']").forEach(function(o) {
        	if (o.closest("[data-xsd2html2xml-choice]"))
        		o.closest("[data-xsd2html2xml-choice]").previousElementSibling.querySelector("input[type='radio']").click();
        });
      </script>
</form>
</body>
</html>